FROM jenkins/jenkins

USER root

WORKDIR /code

RUN apt-get update
RUN apt-get install -y python3
RUN /usr/bin/python3 --version
RUN apt-get install -y python3-pip
RUN pip install --upgrade pip --break-system-packages
RUN pip install pytest --break-system-packages
RUN pip install pytest-html --break-system-packages
RUN pip install requests --break-system-packages
# Install docker and docker compose
RUN curl https://get.docker.com/builds/Linux/x86_64/docker-latest.tgz | tar xvz -C /tmp/ && mv /tmp/docker/docker /usr/bin/docker
#RUN curl -L "https://github.com/docker/compose/releases/download/1.23.1/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
#RUN chmod 755 /usr/local/bin/docker-compose

COPY configuration /code/configuration
COPY datasets /code/datasets
COPY test_suite /code/test_suite